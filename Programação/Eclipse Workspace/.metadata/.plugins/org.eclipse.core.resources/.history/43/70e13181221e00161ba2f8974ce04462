package br.univali.concatto.banco;

import java.util.Scanner;

public class Controlador {
	private Banco banco = new Banco();
	private static Scanner scanner = new Scanner(System.in);
	
	private static int lerInteiro(String mensagem) {
		System.out.print(mensagem);
		return scanner.nextInt();
	}
	
	private static double lerReal(String mensagem) {
		System.out.print(mensagem);
		return scanner.nextDouble();
	}
	
	public Controlador() {		
		System.out.println("Boas vindas ao banco!");
		int acao;
		do {
			acao = solicitarAcao();
			if (acao != 8) realizarAcao(acao);
		} while (acao != 8);
	}
	
	private void realizarAcao(int acao) {
		switch (acao) {
		case 1:
			criarConta();
			break;
		case 2:
			removerConta();
			break;
		case 3:
			sacar();
			break;
		case 4:
			depositar();
			break;
		case 5:
			consultarSaldo();
			break;
		case 6:
			consultarExtrato();
			break;
		case 7:
			transferir();
			break;
		}
	}

	private void transferir() {
		int contaOrigem = lerInteiro("Digite o número da conta de origem: ");
		int contaDestino = lerInteiro("Digite o número da conta de destino: ");
		double valor = lerReal("Digite a quantidade: ");
		if (banco.transferir(contaOrigem, contaDestino, valor)) {
			System.out.println("Transferência de " + contaOrigem + " para " + contaDestino + " realizada com sucesso!");
		} else {
			System.out.println("Transferência rejeitada");
		}
	}

	private void consultarExtrato() {
		int conta = lerInteiro("Digite o número da conta: ");
		System.out.println("Extrato da conta " + conta + ":");
		for (Movimentacao m : banco.extrato(conta)) {
			System.out.println(m);
		}
	}

	private void consultarSaldo() {
		int conta = lerInteiro("Digite o número da conta: ");
		System.out.println("Saldo da conta " + conta + ": " + banco.saldo(conta));
	}

	private void depositar() {
		int conta = lerInteiro("Digite o número da conta: ");
		double valor = lerReal("Digite a quantidade: ");
		if (banco.depositar(conta, valor)) {
			System.out.println(valor + " reais depositados com sucesso.");
		} else {
			System.out.println("Depósito rejeitado.");
		}
	}

	private void sacar() {
		int conta = lerInteiro("Digite o número da conta: ");
		double valor = lerReal("Digite a quantidade: ");
		if (banco.sacar(conta, valor)) {
			System.out.println(valor + " reais sacados com sucesso.");
		} else {
			System.out.println("Saque rejeitado.");
		}
	}

	private void removerConta() {
		int conta = lerInteiro("Digite o número da conta: ");
		if (banco.excluirConta(conta)) {
			System.out.println("Conta " + conta + " removida com sucesso.");
		} else {
			System.out.println("Falha na remoção da conta.");
		}
	}

	private void criarConta() {
		double saldoInicial = lerReal("Digite o saldo inicial: ");
		int numero = banco.criarConta(saldoInicial);
		System.out.println("Conta n. " + numero + " criada.");
	}

	public int solicitarAcao() {
		System.out.println("Entre com a ação:");
		System.out.println("1 - Criar conta");
		System.out.println("2 - Remover conta");
		System.out.println("3 - Sacar");
		System.out.println("4 - Depositar");
		System.out.println("5 - Saldo");
		System.out.println("6 - Extrato");
		System.out.println("7 - Transferir");
		System.out.println("8 - Sair");
		return lerInteiro("Ação: ");
	}
	
	public static void main(String[] args) {
		new Controlador();
	}

}
